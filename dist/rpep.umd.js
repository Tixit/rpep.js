!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.rpep=t():e.rpep=t()}(this,function(){return function(e){function t(r){if(n[r])return n[r].exports;var i=n[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,t),i.l=!0,i.exports}var n={};return t.m=e,t.c=n,t.d=function(e,n,r){t.o(e,n)||Object.defineProperty(e,n,{configurable:!1,enumerable:!0,get:r})},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=2)}([function(e,t,n){(function(r){var i;!function(s){function o(){this._events={},this._conf&&a.call(this,this._conf)}function a(e){e?(this._conf=e,e.delimiter&&(this.delimiter=e.delimiter),this._maxListeners=e.maxListeners!==s?e.maxListeners:d,e.wildcard&&(this.wildcard=e.wildcard),e.newListener&&(this.newListener=e.newListener),e.verboseMemoryLeak&&(this.verboseMemoryLeak=e.verboseMemoryLeak),this.wildcard&&(this.listenerTree={})):this._maxListeners=d}function c(e,t){var n="(node) warning: possible EventEmitter memory leak detected. "+e+" listeners added. Use emitter.setMaxListeners() to increase limit.";if(this.verboseMemoryLeak&&(n+=" Event name: "+t+"."),void 0!==r&&r.emitWarning){var i=new Error(n);i.name="MaxListenersExceededWarning",i.emitter=this,i.count=e,r.emitWarning(i)}else console.error(n),console.trace&&console.trace()}function l(e){this._events={},this.newListener=!1,this.verboseMemoryLeak=!1,a.call(this,e)}function h(e,t,n,r){if(!n)return[];var i,s,o,a,c,l,f,u=[],d=t.length,p=t[r],m=t[r+1];if(r===d&&n._listeners){if("function"==typeof n._listeners)return e&&e.push(n._listeners),[n];for(i=0,s=n._listeners.length;i<s;i++)e&&e.push(n._listeners[i]);return[n]}if("*"===p||"**"===p||n[p]){if("*"===p){for(o in n)"_listeners"!==o&&n.hasOwnProperty(o)&&(u=u.concat(h(e,t,n[o],r+1)));return u}if("**"===p){f=r+1===d||r+2===d&&"*"===m,f&&n._listeners&&(u=u.concat(h(e,t,n,d)));for(o in n)"_listeners"!==o&&n.hasOwnProperty(o)&&("*"===o||"**"===o?(n[o]._listeners&&!f&&(u=u.concat(h(e,t,n[o],d))),u=u.concat(h(e,t,n[o],r))):u=o===m?u.concat(h(e,t,n[o],r+2)):u.concat(h(e,t,n[o],r)));return u}u=u.concat(h(e,t,n[p],r+1))}if(a=n["*"],a&&h(e,t,a,r+1),c=n["**"])if(r<d){c._listeners&&h(e,t,c,d);for(o in c)"_listeners"!==o&&c.hasOwnProperty(o)&&(o===m?h(e,t,c[o],r+2):o===p?h(e,t,c[o],r+1):(l={},l[o]=c[o],h(e,t,{"**":l},r+1)))}else c._listeners?h(e,t,c,d):c["*"]&&c["*"]._listeners&&h(e,t,c["*"],d);return u}function f(e,t){e="string"==typeof e?e.split(this.delimiter):e.slice();for(var n=0,r=e.length;n+1<r;n++)if("**"===e[n]&&"**"===e[n+1])return;for(var i=this.listenerTree,o=e.shift();o!==s;){if(i[o]||(i[o]={}),i=i[o],0===e.length)return i._listeners?("function"==typeof i._listeners&&(i._listeners=[i._listeners]),i._listeners.push(t),!i._listeners.warned&&this._maxListeners>0&&i._listeners.length>this._maxListeners&&(i._listeners.warned=!0,c.call(this,i._listeners.length,o))):i._listeners=t,!0;o=e.shift()}return!0}var u=Array.isArray?Array.isArray:function(e){return"[object Array]"===Object.prototype.toString.call(e)},d=10;l.EventEmitter2=l,l.prototype.delimiter=".",l.prototype.setMaxListeners=function(e){e!==s&&(this._maxListeners=e,this._conf||(this._conf={}),this._conf.maxListeners=e)},l.prototype.event="",l.prototype.once=function(e,t){return this._once(e,t,!1)},l.prototype.prependOnceListener=function(e,t){return this._once(e,t,!0)},l.prototype._once=function(e,t,n){return this._many(e,1,t,n),this},l.prototype.many=function(e,t,n){return this._many(e,t,n,!1)},l.prototype.prependMany=function(e,t,n){return this._many(e,t,n,!0)},l.prototype._many=function(e,t,n,r){function i(){return 0==--t&&s.off(e,i),n.apply(this,arguments)}var s=this;if("function"!=typeof n)throw new Error("many only accepts instances of Function");return i._origin=n,this._on(e,i,r),s},l.prototype.emit=function(){this._events||o.call(this);var e=arguments[0];if("newListener"===e&&!this.newListener&&!this._events.newListener)return!1;var t,n,r,i,s,a=arguments.length;if(this._all&&this._all.length){if(s=this._all.slice(),a>3)for(t=new Array(a),i=0;i<a;i++)t[i]=arguments[i];for(r=0,n=s.length;r<n;r++)switch(this.event=e,a){case 1:s[r].call(this,e);break;case 2:s[r].call(this,e,arguments[1]);break;case 3:s[r].call(this,e,arguments[1],arguments[2]);break;default:s[r].apply(this,t)}}if(this.wildcard){s=[];var c="string"==typeof e?e.split(this.delimiter):e.slice();h.call(this,s,c,this.listenerTree,0)}else{if("function"==typeof(s=this._events[e])){switch(this.event=e,a){case 1:s.call(this);break;case 2:s.call(this,arguments[1]);break;case 3:s.call(this,arguments[1],arguments[2]);break;default:for(t=new Array(a-1),i=1;i<a;i++)t[i-1]=arguments[i];s.apply(this,t)}return!0}s&&(s=s.slice())}if(s&&s.length){if(a>3)for(t=new Array(a-1),i=1;i<a;i++)t[i-1]=arguments[i];for(r=0,n=s.length;r<n;r++)switch(this.event=e,a){case 1:s[r].call(this);break;case 2:s[r].call(this,arguments[1]);break;case 3:s[r].call(this,arguments[1],arguments[2]);break;default:s[r].apply(this,t)}return!0}if(!this._all&&"error"===e)throw arguments[1]instanceof Error?arguments[1]:new Error("Uncaught, unspecified 'error' event.");return!!this._all},l.prototype.emitAsync=function(){this._events||o.call(this);var e=arguments[0];if("newListener"===e&&!this.newListener&&!this._events.newListener)return Promise.resolve([!1]);var t,n,r,i,s,a=[],c=arguments.length;if(this._all){if(c>3)for(t=new Array(c),i=1;i<c;i++)t[i]=arguments[i];for(r=0,n=this._all.length;r<n;r++)switch(this.event=e,c){case 1:a.push(this._all[r].call(this,e));break;case 2:a.push(this._all[r].call(this,e,arguments[1]));break;case 3:a.push(this._all[r].call(this,e,arguments[1],arguments[2]));break;default:a.push(this._all[r].apply(this,t))}}if(this.wildcard){s=[];var l="string"==typeof e?e.split(this.delimiter):e.slice();h.call(this,s,l,this.listenerTree,0)}else s=this._events[e];if("function"==typeof s)switch(this.event=e,c){case 1:a.push(s.call(this));break;case 2:a.push(s.call(this,arguments[1]));break;case 3:a.push(s.call(this,arguments[1],arguments[2]));break;default:for(t=new Array(c-1),i=1;i<c;i++)t[i-1]=arguments[i];a.push(s.apply(this,t))}else if(s&&s.length){if(s=s.slice(),c>3)for(t=new Array(c-1),i=1;i<c;i++)t[i-1]=arguments[i];for(r=0,n=s.length;r<n;r++)switch(this.event=e,c){case 1:a.push(s[r].call(this));break;case 2:a.push(s[r].call(this,arguments[1]));break;case 3:a.push(s[r].call(this,arguments[1],arguments[2]));break;default:a.push(s[r].apply(this,t))}}else if(!this._all&&"error"===e)return arguments[1]instanceof Error?Promise.reject(arguments[1]):Promise.reject("Uncaught, unspecified 'error' event.");return Promise.all(a)},l.prototype.on=function(e,t){return this._on(e,t,!1)},l.prototype.prependListener=function(e,t){return this._on(e,t,!0)},l.prototype.onAny=function(e){return this._onAny(e,!1)},l.prototype.prependAny=function(e){return this._onAny(e,!0)},l.prototype.addListener=l.prototype.on,l.prototype._onAny=function(e,t){if("function"!=typeof e)throw new Error("onAny only accepts instances of Function");return this._all||(this._all=[]),t?this._all.unshift(e):this._all.push(e),this},l.prototype._on=function(e,t,n){if("function"==typeof e)return this._onAny(e,t),this;if("function"!=typeof t)throw new Error("on only accepts instances of Function");return this._events||o.call(this),this.emit("newListener",e,t),this.wildcard?(f.call(this,e,t),this):(this._events[e]?("function"==typeof this._events[e]&&(this._events[e]=[this._events[e]]),n?this._events[e].unshift(t):this._events[e].push(t),!this._events[e].warned&&this._maxListeners>0&&this._events[e].length>this._maxListeners&&(this._events[e].warned=!0,c.call(this,this._events[e].length,e))):this._events[e]=t,this)},l.prototype.off=function(e,t){function n(e){if(e!==s){var t=Object.keys(e);for(var r in t){var i=t[r],o=e[i];o instanceof Function||"object"!=typeof o||null===o||(Object.keys(o).length>0&&n(e[i]),0===Object.keys(o).length&&delete e[i])}}}if("function"!=typeof t)throw new Error("removeListener only takes instances of Function");var r,i=[];if(this.wildcard){var o="string"==typeof e?e.split(this.delimiter):e.slice();i=h.call(this,null,o,this.listenerTree,0)}else{if(!this._events[e])return this;r=this._events[e],i.push({_listeners:r})}for(var a=0;a<i.length;a++){var c=i[a];if(r=c._listeners,u(r)){for(var l=-1,f=0,d=r.length;f<d;f++)if(r[f]===t||r[f].listener&&r[f].listener===t||r[f]._origin&&r[f]._origin===t){l=f;break}if(l<0)continue;return this.wildcard?c._listeners.splice(l,1):this._events[e].splice(l,1),0===r.length&&(this.wildcard?delete c._listeners:delete this._events[e]),this.emit("removeListener",e,t),this}(r===t||r.listener&&r.listener===t||r._origin&&r._origin===t)&&(this.wildcard?delete c._listeners:delete this._events[e],this.emit("removeListener",e,t))}return n(this.listenerTree),this},l.prototype.offAny=function(e){var t,n=0,r=0;if(e&&this._all&&this._all.length>0){for(t=this._all,n=0,r=t.length;n<r;n++)if(e===t[n])return t.splice(n,1),this.emit("removeListenerAny",e),this}else{for(t=this._all,n=0,r=t.length;n<r;n++)this.emit("removeListenerAny",t[n]);this._all=[]}return this},l.prototype.removeListener=l.prototype.off,l.prototype.removeAllListeners=function(e){if(0===arguments.length)return!this._events||o.call(this),this;if(this.wildcard)for(var t="string"==typeof e?e.split(this.delimiter):e.slice(),n=h.call(this,null,t,this.listenerTree,0),r=0;r<n.length;r++){var i=n[r];i._listeners=null}else this._events&&(this._events[e]=null);return this},l.prototype.listeners=function(e){if(this.wildcard){var t=[],n="string"==typeof e?e.split(this.delimiter):e.slice();return h.call(this,t,n,this.listenerTree,0),t}return this._events||o.call(this),this._events[e]||(this._events[e]=[]),u(this._events[e])||(this._events[e]=[this._events[e]]),this._events[e]},l.prototype.eventNames=function(){return Object.keys(this._events)},l.prototype.listenerCount=function(e){return this.listeners(e).length},l.prototype.listenersAny=function(){return this._all?this._all:[]},(i=function(){return l}.call(t,n,t,e))!==s&&(e.exports=i)}()}).call(t,n(3))},function(e,t,n){"use strict";function r(){var e=arguments;if(1==e.length)var t={init:a},n=e[0];else var t=e[0],n=e[1];var u={};-1!==[Error,EvalError,RangeError,ReferenceError,SyntaxError,TypeError,URIError].indexOf(t)&&(t=i(t,u));var d="function"==typeof t;n[c]=d?t[c]:t;var p=new n(t);u.name=p.name,!p[h]&&d&&(p[h]=function(){t.apply(this,arguments)});var m=function(){};m[c]=p;var v=p.name?p.name:"";if(p[h]===o||p[h]===a)var y=new Function("F","return function "+v+"(){return new F()}")(m);else var y=new Function("F","i","u","n","return function "+v+"(){ var x=new F(),r=i.apply(x,arguments)\nif(r===n)\nreturn x\nelse if(r===u)\nreturn n\nelse\nreturn r\n}")(m,p[h],r[l]);p.constructor=y;for(var _ in p)s(y,p,_);for(var _ in t)f.call(t,_)&&y[_]===o&&s(y,t,_);return y.parent=t,y[c]=p,y}function i(e,t){function n(){var n=new e(arguments[0]);return n.name=t.name,this.message=n.message,Object.defineProperty?Object.defineProperty(this,"stack",{get:function(){return n.stack},configurable:!0}):this.stack=n.stack,this}var r=function(){};return r.prototype=e.prototype,n.prototype=new r,n}function s(e,t,n){try{var r=Object.getOwnPropertyDescriptor(t,n);r.get!==o||r.get!==o&&Object.defineProperty!==o?Object.defineProperty(e,n,r):e[n]=t[n]}catch(e){}}var o,a=function(){},c="prototype",l="undefined",h="init",f={}.hasOwnProperty;r[l]={},e.exports=r},function(e,t,n){function r(e,t){if(t>h)var n="Id greater than 2^53";else if(e.server){if(t%2!=1)var n="Id from client not odd"}else if(t%2!=0)var n="Id from server not even";void 0!==n&&e.fireError("rpepInvalidId",{reason:n})}var i=n(0),s=n(1),o=n(4),a=0,c=0,l=0,h=9007199254740992,f={close:1,idDiscontinuity:1,e:1,error:1},u={order:1},d={e:1,orderNumberDiscontinuity:1},p=s(Error,function(){this.name="PeerError"});e.exports=s(function(){function e(e,n,r,i){if(void 0!==this.commands[r])throw t('handler for "'+r+'"');if(r in reservedFireAndForgetErrorCommands)throw new Error("Can't setup a handler for the command '"+r+"', because it's reserved for global error messages. To handle global errors, listen to the connection's 'error' event.");if(r in reservedFireAndForgetCommands)throw new Error("Can't setup a handler for the command '"+r+"', because it's reserved for internal use.");this.commands[r]={type:n,handler:i}}function t(e){return new Error("A "+e+" already exists! You can only have one handler per command.")}this.PeerError=p,this.init=function(e,t,n){n||(n={}),this.transport=e,this.serialization=t,this.options=n,this.commands={}},this.connect=function(){var e=Array.prototype.slice.call(arguments),t=this;return new Promise(function(n,r){var i=this.transport.connect.apply(this.transport.connect,e.concat([t.options])),s=!1,o=[];i.onOpen(function(){s=!0,n(a)});var a=m(t,i);i.onError(function(e){o.push(e)}),i.onClose&&i.onClose(function(){if(!s){var e="Connection couldn't be opened";o.length>0&&o.join("\n");var t=new Error(e);t.errors=o,r(t)}})})},this.listen=function(){var e=Array.prototype.slice.call(arguments),t=e[e.length-1];e.slice(0,-1);return new Promise(function(e,n){if(void 0!==r.listener)throw new Error("Rpep object already listening!");var r=this;r.listener=this.transport.listen(port,r.options,function(e){t(e,{accept:function(){var t=e.accept();return m(r,t)},reject:function(){e.reject()},rawRequest:e})}),r.listener.onListening(function(){e()}),r.listener.onError(function(e){n(e)}),r.listener.onClose(function(e){r.listener=void 0})})},Object.defineProperty(this,"listening",{get:function(){this.listener}}),this.close=function(){this.listener&&this.listener.close()},this.receive=function(t,n){e(that,a,t,n)},this.respond=function(t,n){e(that,c,t,n)},this.stream=function(t,n){e(that,l,t,n)},this.default=function(e){if(void 0!==this.defaultHandler)throw t("default handler");this.defaultHandler=e},this.preHandle=function(e){if(void 0!==this.preHandler)throw t("preHandle");this.preHandler=e},this.rawHandle=function(e){if(void 0!==this.rawHandler)throw t("rawHandle");this.rawHandler=e}});var m=s(i,function(){function e(e,t){return e.serialization.serialize(t)}function t(e,t){return e.serialization.deserialize(t)}function n(e){var t=e.nextId;do{e.nextId+=2,e.nextId>h&&(e.nextId=e.nextId%2)}while(e.nextId in e.commandState);e.nextId!==t+2&&m(e,["idDiscontinuity",[t,e.nextid]])}function i(e){if(e.orderNumber+=1,e.orderNumber>h){var t=e.orderNumber-1;e.orderNumber=0,e.emit(),m(that,[e.id,"orderNumberDiscontinuity",[t,that.orderNumber]])}}function s(e){var t={},n=!1;for(var r in e)"message"!==r&&(t[r]=e[r],n=!0);var i=[e.message];return n&&i.push(t),i}function o(e,t){var n=new Error(e);for(var r in t)"message"!==r&&(n[r]=t[r]);return n}function u(e,t){var n=v(function(r,o){if(n.endMessageSent)throw new Error("Stream 'end' event has been sent, can't send more events.");if("error"===r)n.orderingData?(m(e,[t,"e",s(o)]),i(n)):m(e,[t,"e",s(o)]);else{if(r in d)throw new Error("Can't emit the '"+r+"' event directly; '"+r+"' is reserved for internal use.");m(e,[t,r,s(o)]),"end"===r&&(n.endMessageSent=!0,n.endMessageReceived&&delete e.commandState[t])}});return n.id=t,n.orderingData=!1,n.orderNumber=0,n.endMessageSent=!1,n}function m(t,n){var r=e(t,n);if(void 0!==t.maxSendSize&&r.length>t.maxSendSize){var i=new Error("maxMessageSizeExceeded");throw i.messageSize=r.length,i}if(!this.connected)throw Error("Connection is closed");this.connection.send(r)}function y(e,n){try{if(e.rawHandler&&"ignore"===e.rawHandler.call(e,n))return;try{var i=t(e,n)}catch(t){if(e.sendCommandErrorInfo)try{e.fireError("unparsableCommand",{message:n})}catch(t){if("maxMessageSizeExceeded"!==t.message)throw t;e.fireError("unparsableCommand",{message:n.slice(0,200)})}return}if(e.preHandler&&"ignore"===e.preHandler.call(e,i))return;var h=typeof i[0];if("string"===h){if(0===i.lengh&&"close"===h)return void e.emit("closeMessage");var f=e.commands[command];if(void 0===f)return void e.fireError("noSuchCommand",{command:i[1]});if(f.type===a)f.handler.call(e,i[1]);else if(f.type===c){var d=i[1];if(!r(this,d))return;Promise.resolve().then(function(){return f.handler.call(e,i[2],d)}).then(function(t){m(e,[d,t])}).catch(function(t){t instanceof p?m(e,[d,"e",s(t)]):(e.emit("error",t),m(e,[d,"e",s({message:"serverError"})]))})}else{if(f.type!==l)throw new Error("Invalid command type: "+f.type);var d=i[1];if(!r(this,d))return;var y=connection.commandState[d]=u(e,d);Promise.resolve().then(function(){f.handler.call(e,y,i[2],d)}).catch(function(t){e.emit("error",t)})}}else if("number"===h){if(!(h in e.commandState))return void e.fireError("rpepIdNotFound",{id:h});if(e.commandState[h]instanceof v){var y=e.commandState[h];if(y.orderingData)var _=i[1],w=i[2],g=i[3];else var w=i[1],g=i[2];if("order"===w)y.orderingData=!0!==g;else if("e"===w){var b=o(g[0],g[1]);y._external.emit("error",b,_)}else y._external.emit(w,g,_),"end"===w&&(y.endMessageReceived=!0,y.endMessageSent&&delete e.commandState[h])}else{var x=e.commandState[h];3===i.length?x.reject(o(i[2][0],i[2][1])):x.resolve(i[1])}}else e.sendCommandErrorInfo?e.fireError("invalidMessage",{message:n.slice(0,200)}):e.fireError("invalidMessage")}catch(e){connection.emit("error",e)}}this.init=function(e,t,n){this.transport=e.transport,this.serialization=e.serialization,this.commands=e.commands,this.maxSendSize=e.rpepOptions.maxSendSize,this.maxReceiveSize=e.rpepOptions.maxReceiveSize,this.sendCommandErrorInfo=e.rpepOptions.sendCommandErrorInfo,this.server=n.server,this.connection=t,this.connected=!0,this.sessionData={},this.commandState={},this.server?this.nextId=0:this.nextId=1;var r=this;this.connection.onClose?this.connection.onClose(function(){r.connected=!1,r.emit("close")}):this.on("closeMessage",function(){r.connected=!1,r.emit("close")}),this.connection.onMessage(function(e){y(r,e),r.emit("rawMessage",e)}),this.connection.onError(function(e){r.emit("error",e)})},this.close=function(){this.connected&&(void 0===this.connection.onClose&&m(that,["close"]),this.connection.close(),this.connection=void 0)},this.drop=function(){this.connected&&this.connection.drop?this.connection.drop():this.close()},this.fire=function(e,t){if(e in f)throw new Error("Can't fire an '"+e+"' event directly; '"+e+"' is a global command reserved for internal use.");m(this,[e,t])},this.fireError=function(e){m(this,["e",[e,data]])},this.request=function(e,t){if(e in f)throw new Error("Can't fire an '"+e+"' event directly; '"+e+"' is a global command reserved for internal use.");if(void 0!==this.commandState[this.nextId])throw new Error("There is already a callback for id: "+this.nextId);m(this,[e,this.nextId,t]);var r=r();return this.requestFutures[this.nextId]=r,n(this),r.f},this.streamConnect=function(e,t){if(e in f)throw new Error("Can't fire an '"+e+"' event directly; '"+e+"' is a global command reserved for internal use.");if(void 0!==this.commandState[this.nextId])throw new Error("There is already a callback for id: "+this.nextId);m(this,[e,this.nextId,t]);var r=u(this,this.nextId);return n(this),r}}),v=s(o,function(e){this.on=function(t,n){if(t in u)throw new Error("Can't listen on the '"+t+"' event directly; the '"+t+"' event is reserved for internal use.");e.on.call(this,t,n)}})},function(e,t){function n(){throw new Error("setTimeout has not been defined")}function r(){throw new Error("clearTimeout has not been defined")}function i(e){if(h===setTimeout)return setTimeout(e,0);if((h===n||!h)&&setTimeout)return h=setTimeout,setTimeout(e,0);try{return h(e,0)}catch(t){try{return h.call(null,e,0)}catch(t){return h.call(this,e,0)}}}function s(e){if(f===clearTimeout)return clearTimeout(e);if((f===r||!f)&&clearTimeout)return f=clearTimeout,clearTimeout(e);try{return f(e)}catch(t){try{return f.call(null,e)}catch(t){return f.call(this,e)}}}function o(){m&&d&&(m=!1,d.length?p=d.concat(p):v=-1,p.length&&a())}function a(){if(!m){var e=i(o);m=!0;for(var t=p.length;t;){for(d=p,p=[];++v<t;)d&&d[v].run();v=-1,t=p.length}d=null,m=!1,s(e)}}function c(e,t){this.fun=e,this.array=t}function l(){}var h,f,u=e.exports={};!function(){try{h="function"==typeof setTimeout?setTimeout:n}catch(e){h=n}try{f="function"==typeof clearTimeout?clearTimeout:r}catch(e){f=r}}();var d,p=[],m=!1,v=-1;u.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];p.push(new c(e,t)),1!==p.length||m||i(a)},c.prototype.run=function(){this.fun.apply(null,this.array)},u.title="browser",u.browser=!0,u.env={},u.argv=[],u.version="",u.versions={},u.on=l,u.addListener=l,u.once=l,u.off=l,u.removeListener=l,u.removeAllListeners=l,u.emit=l,u.prependListener=l,u.prependOnceListener=l,u.listeners=function(e){return[]},u.binding=function(e){throw new Error("process.binding is not supported")},u.cwd=function(){return"/"},u.chdir=function(e){throw new Error("process.chdir is not supported")},u.umask=function(){return 0}},function(e,t,n){var r=n(1),i=n(0);e.exports=r(function(){this.init=function(e){this._external=new i,this._onEmitHandler=e},this.emit=function(e,t){if(this.ended)throw new Error("Duplex Stream has already been ended.");this._onEmitHandler(e,t)},this.on=function(e,t){this._external.on(e,t)},this.off=this.removeListener=function(e,t){this._external.removeListener(e,t)},this.onAny=function(e){this._external.onAny(e)},this.end=function(){this.emit("end"),this.ended=!0}})}])});